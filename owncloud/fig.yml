postgres:
  image: postgres
  volumes:
    - /opt/postgres/main:/var/lib/postgresql
    - /opt/postgres/data:/var/lib/postgresql/data 
  user: postgres
  environment:
    - POSTGRES_PASSWORD=mysecretpassword
    - PSOTGRES_USER=owncloud

owncloud:
  build: .
  environment:
    - NAME_LINK_NGINX=owncloud
    - POSTGRES_DB=owncloud
    - POSTGRES_USER=owncloud
    - POSTGRES_PW=mysecretpassword
    - POSTGRES_HOST=postgres
    - ROOT_NAME=root
    - ROOT_PW=myrootpassword
  volumes:
    - /opt/owncloud/log:/var/log/cron
    - /opt/owncloud/data:/var/www/owncloud/data
    - /opt/owncloud/config:/var/www/owncloud/config
    - /opt/owncloud/nginx/log:/var/log/nginx
    - /opt/owncloud/nginx/certs:/etc/nginx/certs
    - /opt/owncloud/nginx/config:/opt/nginx
  links:
    - postgres:postgres
  ports:
    - "80:80"
    - "443:443"

